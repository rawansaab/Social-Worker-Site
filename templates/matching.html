{% extends "base.html" %}
{% block title %}××¢×¨×›×ª ×—×›××” ×œ×©×™×‘×•×¥ ×¡×˜×•×“× ×˜×™×{% endblock %}

{% block content %}

<section class="hero">
  <div class="hero-label">××¢×¨×›×ª ××ª×§×“××ª ×œ×©×™×‘×•×¥ ××•×˜×•××˜×™</div>
  <h1>××¢×¨×›×ª ×—×›××” ×œ×©×™×‘×•×¥ ×¡×˜×•×“× ×˜×™×<br>×œ×”×ª××—×•×™×•×ª ×‘×¢×‘×•×“×” ×¡×•×¦×™××œ×™×ª</h1>
  <p class="hero-sub">
    ×¤×ª×¨×•×Ÿ ××•×˜×•××˜×™ ×•×™×¢×™×œ ×œ×©×™×‘×•×¥ ×¡×˜×•×“× ×˜×™× ×œ××§×•××•×ª ×”×ª××—×•×ª ×¢×œ ×‘×¡×™×¡ ×”×¢×“×¤×•×ª,
    ××™×•×× ×•×™×•×ª ×•×“×¨×™×©×•×ª ×”××•×¡×“×•×ª.
  </p>
  <div class="hero-actions">
    <a href="https://www.studentssurvey.org" class="btn-primary" target="_blank" rel="noopener noreferrer">
      ×©××œ×•×Ÿ ×¡×˜×•×“× ×˜
    </a>
    <a href="https://mentormappingsurvey.org" class="btn-ghost" target="_blank" rel="noopener noreferrer">
      ××™×¤×•×™ ××“×¨×™×›×™×
    </a>
  </div>
</section>

<section class="steps">
  <h2>××™×š ×–×” ×¢×•×‘×“?</h2>
  <p class="section-sub">×ª×”×œ×™×š ×¤×©×•×˜ ×•×™×¢×™×œ ×‘×©×œ×•×©×” ×©×œ×‘×™×</p>
  <div class="steps-grid">
    <div class="step-card">
      <div class="step-icon">ğŸ“</div>
      <h3>×©×œ×‘ 1: ××™×œ×•×™ ×©××œ×•× ×™×</h3>
      <p>×¡×˜×•×“× ×˜×™× ×•××“×¨×™×›×™× ×××œ××™× ×©××œ×•× ×™× ××¤×•×¨×˜×™× ×¢×œ ×”×¢×“×¤×•×ª, ×›×™×©×•×¨×™× ×•×¦×¨×›×™ ×”××•×¡×“.</p>
    </div>
    <div class="step-card">
      <div class="step-icon">ğŸ“Š</div>
      <h3>×©×œ×‘ 2: × ×™×ª×•×— × ×ª×•× ×™×</h3>
      <p>×”××¢×¨×›×ª ××•×¡×¤×ª ×•×× ×ª×—×ª ××ª ×”× ×ª×•× ×™× ×‘×××¦×¢×•×ª ××œ×’×•×¨×™×ª××™× ××ª×§×“××™×.</p>
    </div>
    <div class="step-card">
      <div class="step-icon">âœ…</div>
      <h3>×©×œ×‘ 3: ×©×™×‘×•×¥ ×—×›×</h3>
      <p>×©×™×‘×•×¥ ××•×˜×•××˜×™ ×•××•×¤×˜×™××œ×™ ×©×œ ×¡×˜×•×“× ×˜×™× ×œ××§×•××•×ª ×”×ª××—×•×ª ××ª××™××™×.</p>
    </div>
  </div>
</section>

<section class="cta">
  <h2>××•×›× ×™× ×œ×”×ª×—×™×œ?</h2>
  <p>×”×¦×˜×¨×¤×• ×œ××¢×¨×›×ª ×©×œ× ×• ×•×”×¤×›×• ××ª ×ª×”×œ×™×š ×”×©×™×‘×•×¥ ×œ×¤×©×•×˜, ××”×™×¨ ×•×™×¢×™×œ.</p>
  <div class="cta-actions">
    <a href="https://www.studentssurvey.org" class="btn-light" target="_blank" rel="noopener noreferrer">
      ××™×œ×•×™ ×©××œ×•×Ÿ ×¡×˜×•×“× ×˜
    </a>
    <a href="https://mentormappingsurvey.org" class="btn-light-outline" target="_blank" rel="noopener noreferrer">
      ××™×œ×•×™ ××™×¤×•×™ ××“×¨×™×š
    </a>
  </div>
</section>

<!-- ğŸ”¹ ×•×•×™×“×’'×˜ ×¦'××˜ ×¦×£ ×œ××©×ª××© -->
<div class="chat-launcher" id="chat-launcher">
  <span class="chat-launcher-icon">ğŸ’¬</span>
  <span class="chat-launcher-label">×¦'××˜</span>
</div>

<div class="chat-box" id="chat-box" aria-hidden="true">
  <div class="chat-header">
    <span>×¦'××˜ ××¢×¨×›×ª ×”×©×™×‘×•×¥</span>
    <button type="button" class="chat-close" id="chat-close">Ã—</button>
  </div>

  <div class="chat-messages" id="chat-messages">
    <!-- ×”×•×“×¢×ª ×¤×ª×™×—×” ×©×œ ×”×‘×•×˜ -->
    <div class="msg msg-bot">
      <div class="msg-text">
        ×‘×¨×•×›×™× ×”×‘××™× ×œ××¢×¨×›×ª ×”×©×™×‘×•×¥ ×”××•×˜×•××˜×™×ª ğŸŒ¸<br>
        ××™×š ××¤×©×¨ ×œ×¢×–×•×¨?<br>
        ××¤×©×¨ ×œ×‘×—×•×¨ ×©××œ×” ××•×›× ×” ××• ×œ×›×ª×•×‘ ×©××œ×” ×—×•×¤×©×™×ª.
      </div>
    </div>

    <!-- ×©××œ×•×ª ××•×¦×¢×•×ª -->
    <div class="chat-suggestions">
      <button type="button" class="suggestion-btn" data-q="××™×š ×¢×•×‘×“ ×ª×”×œ×™×š ×”×©×™×‘×•×¥?">
        ××™×š ×¢×•×‘×“ ×ª×”×œ×™×š ×”×©×™×‘×•×¥?
      </button>
      <button type="button" class="suggestion-btn" data-q="××™×š ×× ×™ ×××œ×/×ª ××ª ×©××œ×•×Ÿ ×”×¡×˜×•×“× ×˜?">
        ××™×š ×× ×™ ×××œ×/×ª ××ª ×©××œ×•×Ÿ ×”×¡×˜×•×“× ×˜?
      </button>
      <button type="button" class="suggestion-btn" data-q="×œ××™ ×¤×•× ×™× ×›×©×™×© ×‘×¢×™×” ×˜×›× ×™×ª?">
        ×œ××™ ×¤×•× ×™× ×›×©×™×© ×‘×¢×™×” ×˜×›× ×™×ª?
      </button>
    </div>
  </div>

  <form class="chat-input-row" id="chat-form">
    <input
      type="text"
      id="chat-input"
      placeholder="×›×ª×‘×• ×›××Ÿ ××ª ×”×©××œ×” ×©×œ×›×..."
      autocomplete="off"
    >
    <button type="submit" class="chat-send-btn">×©×œ×™×—×”</button>
  </form>
</div>

{% endblock %}

{% block scripts %}
<script>
  (function() {
    const launcher = document.getElementById('chat-launcher');
    const chatBox  = document.getElementById('chat-box');
    const closeBtn = document.getElementById('chat-close');
    const form     = document.getElementById('chat-form');
    const input    = document.getElementById('chat-input');
    const messages = document.getElementById('chat-messages');
    const suggestionButtons = document.querySelectorAll('.suggestion-btn');

    function openChat() {
      chatBox.classList.add('open');
      chatBox.setAttribute('aria-hidden', 'false');
      input.focus();
    }

    function closeChat() {
      chatBox.classList.remove('open');
      chatBox.setAttribute('aria-hidden', 'true');
    }

    function addMessage(text, from) {
      if (!text.trim()) return;

      const msgDiv = document.createElement('div');
      msgDiv.className = 'msg ' + (from === 'bot' ? 'msg-bot' : 'msg-user');

      const inner = document.createElement('div');
      inner.className = 'msg-text';
      inner.innerHTML = text.replace(/\n/g, '<br>');

      msgDiv.appendChild(inner);
      messages.appendChild(msgDiv);
      messages.scrollTop = messages.scrollHeight;
    }

    function botReply(userText) {
      const reply =
        '×ª×•×“×” ×¢×œ ×”×©××œ×” ğŸ™<br>' +
        '×›×¨×’×¢ ×”×¦×³××˜ ×©×œ× ×• ×”×•× ×“××•. ×¢×‘×•×¨ ×©××œ×•×ª ×“×—×•×¤×•×ª ××¤×©×¨ ×œ×¤× ×•×ª ×œ-social@zefat.ac.il ××• ×œ×˜×•×¤×¡ "×™×¦×™×¨×ª ×§×©×¨".';
      addMessage(reply, 'bot');
    }

    if (launcher && chatBox && closeBtn && form && input && messages) {
      launcher.addEventListener('click', openChat);
      closeBtn.addEventListener('click', closeChat);

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const text = input.value.trim();
        if (!text) return;
        addMessage(text, 'user');
        input.value = '';
        botReply(text);
      });

      suggestionButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const q = this.dataset.q || this.innerText;
          addMessage(q, 'user');
          botReply(q);
        });
      });
    }
  })();
</script>
{% endblock %}
